<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculadora Gastos Viaje | @CaraColaViajes</title>
  <meta name="description" content="Calculadora de gastos para viajes en autocaravana - @CaraColaViajes"/>
  <style>
    /* ==== Todo el CSS dentro del archivo ==== */
    :root {
      --bg: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
      --glass: rgba(255, 255, 255, 0.1);
      --orange: #fb923c;
      --pink: #f472b6;
      --text: #e2e8f0;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      min-height: 100vh;
      padding: 20px 10px;
    }
    .container { max-width: 420px; margin: 0 auto; display:flex; flex-direction:column; min-height: 100vh; }
    h1 {
      font-size: 2.5rem;
      background: linear-gradient(to right, var(--orange), var(--pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
      margin-bottom: 8px;
    }
    .by { text-align:center; font-size:1.3rem; margin-bottom:20px; }
    .by span { color:var(--orange); font-weight:bold; }
    .glass {
      background: var(--glass);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 24px;
      border: 1px solid rgba(255,255,255,0.15);
      flex: 1;
      display:flex;
      flex-direction:column;
    }
    input, button {
      background: rgba(255,255,255,0.15);
      border: none;
      border-radius: 12px;
      padding: 14px;
      color: white;
      font-size: 1rem;
    }
    input::placeholder { color: rgba(255,255,255,0.6); }
    input:focus { outline: 2px solid var(--orange); }
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:20px; }
    .category {
      display:flex; gap:10px; align-items:center;
      background:rgba(255,255,255,0.1);
      padding:12px; border-radius:12px; margin-bottom:10px;
    }
    .category input[type=text] { flex:1; background:transparent; }
    .category input[type=number] { width:90px; text-align:right; }
    .add {
      border:2px dashed rgba(255,255,255,0.3);
      background:transparent;
      cursor:pointer;
      transition:0.2s;
    }
    .add:hover { background:rgba(255,255,255,0.1); }
    .totales { margin-top:auto; padding-top:20px; border-top:1px solid rgba(255,255,255,0.2); }
    .totales div { display:flex; justify-content:space-between; margin-bottom:8px; }
    .big { font-size:1.5rem; font-weight:bold; }
    .copy {
      margin-top:20px;
      background: linear-gradient(to right, var(--orange), var(--pink));
      font-weight:bold;
      cursor:pointer;
      transition:0.3s;
    }
    .copy:hover { transform:scale(1.03); }
    .delete { color:#fca5a5; cursor:pointer; }
    footer { text-align:center; margin-top:20px; font-size:0.8rem; opacity:0.6; }
    /* Iconos SVG incrustados (los m√°s usados) */
    svg { width:20px; height:20px; fill:none; stroke:currentColor; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; flex-shrink:0; }
  </style>
</head>
<body>
<div class="container">
  <h1>Calculadora de Gastos</h1>
  <div class="by">by <span>@CaraColaViajes</span> <svg><use href="#caravan"/></svg></div>

  <div class="glass">
    <div class="grid">
      <input type="number" id="days" placeholder="D√≠as" value="1"/>
      <input type="number" id="people" placeholder="Personas" value="2"/>
    </div>

    <div id="categories"></div>

    <button class="add" id="addCategory">
      <svg><path d="M12 5v14M5 12h14"/></svg> A√±adir categor√≠a
    </button>

    <div class="totales">
      <div><span>Total viaje</span><span id="total" class="big">0‚Ç¨</span></div>
      <div><span>Por persona</span><span id="perPerson">0‚Ç¨</span></div>
      <div><span>Por d√≠a</span><span id="perDay">0‚Ç¨</span></div>
    </div>

    <button class="copy" id="copy">
      <svg><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M16 4h4a2 2 0 0 1 2 2v4M21 14L10 3M10 3H7a2 2 0 0 0-2 2v3"/></svg>
      Copiar resumen para redes
    </button>
  </div>

  <footer>¬© 2025 @CaraColaViajes ‚Äì Hecha con ‚ù§Ô∏è y kil√≥metros por carretera</footer>
</div>

<!-- Definici√≥n de iconos SVG (solo los que usamos) -->
<svg style="display:none">
  <defs>
    <symbol id="plus"><path d="M12 5v14M5 12h14"/></symbol>
    <symbol id="trash"><path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6M14 11v6M5 6l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"/></symbol>
    <symbol id="copy"><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M16 4h4a2 2 0 0 1 2 2v4M21 14L10 3M10 3H7a2 2 0 0 0-2 2v3"/></symbol>
    <symbol id="caravan"><path d="M12 17h8M3 17h6M8 17a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM20 17a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM2 7h20v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7Z"/></symbol>
  </defs>
</svg>

<script>
  const data = JSON.parse(localStorage.getItem('caracolaCalc_v2')) || {
    days: 7, people: 2,
    items: [
      {name:"Gasolina ‚õΩ",amount:0},
      {name:"Peajes",amount:0},
      {name:"Campings / Alojamiento",amount:0},
      {name:"Comida y supermercado",amount:0},
      {name:"Actividades y entradas",amount:0},
      {name:"Otros / imprevistos",amount:0}
    ]
  };

  const cats = document.getElementById('categories');
  document.getElementById('days').value = data.days;
  document.getElementById('people').value = data.people;

  function render() {
    cats.innerHTML = '';
    data.items.forEach((it,i)=>{
      const div = document.createElement('div');
      div.className = 'category';
      div.innerHTML = `
        <input type="text" value="${it.name}" data-i="${i}" data-f="name">
        <input type="number" value="${it.amount}" data-i="${i}" data-f="amount">
        <div class="delete" onclick="borrar(${i})">
          <svg><use href="#trash"/></svg>
        </div>
      `;
      cats.appendChild(div);
    });
    calc();
  }

  function calc() {
    const days = +document.getElementById('days').value || 1;
    const people = +document.getElementById('people').value || 1;
    const total = data.items.reduce((s,x)=>s+(+x.amount||0),0);
    document.getElementById('total').textContent = total.toFixed(0)+'‚Ç¨';
    document.getElementById('perPerson').textContent = (total/people).toFixed(0)+'‚Ç¨';
    document.getElementById('perDay').textContent = (total/days).toFixed(0)+'‚Ç¨';

    data.days = days; data.people = people;
    localStorage.setItem('caracolaCalc_v2', JSON.stringify(data));
  }

  window.borrar = i => { data.items.splice(i,1); render(); };

  document.getElementById('addCategory').onclick = () => {
    data.items.push({name:"Nueva categor√≠a", amount:0});
    render();
  };

  cats.addEventListener('input', e => {
    if (!e.target.dataset.i) return;
    const i = e.target.dataset.i;
    const f = e.target.dataset.f;
    data.items[i][f] = f==='amount' ? +e.target.value||0 : e.target.value;
    calc();
  });

  document.getElementById('days').addEventListener('input',calc);
  document.getElementById('people').addEventListener('input',calc);

  document.getElementById('copy').onclick = () => {
    const days = document.getElementById('days').value || 1;
    const people = document.getElementById('people').value || 1;
    const total = data.items.reduce((s,x)=>s+(+x.amount||0),0);
    const texto = `üí∞ Presupuesto viaje\n\n` +
      data.items.filter(x=>x.amount>0).map(x=>`${x.name}: ${x.amount}‚Ç¨`).join('\n') +
      `\n\nüü∞ TOTAL: ${total}‚Ç¨\nüë• Por persona: ${(total/people).toFixed(0)}‚Ç¨\nüìÖ Por d√≠a: ${(total/days).toFixed(0)}‚Ç¨\n\nCalculado con la calculadora de @CaraColaViajes üöê‚ú®`;
    
    navigator.clipboard.writeText(texto).then(()=>alert('¬°Copiado al portapapeles! P√©galo donde quieras'));
  };

  render();
</script>
</body>
</html>
